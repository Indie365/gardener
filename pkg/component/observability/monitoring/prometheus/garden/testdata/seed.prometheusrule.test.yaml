rule_files:
- seed.prometheusrule.yaml

tests:
  - name: SeedConditionFailing:SmoothOutFlapping
    interval: 1m
    input_series:
      - series: garden_seed_condition{condition = "ExtensionsReady",
                                      name      = "seed-flapping"}
        values: 0x2 2 -1 2 0
      - series: garden_seed_condition{condition = "ExtensionsReady",
                                      name      = "seed-progressing-for-long"}
        values: 2x2 0x4
    external_labels:
      landscape: landscape-unit-tests
    alert_rule_test:
      - alertname: SeedConditionFailing
        eval_time: 6m
        exp_alerts:
          - exp_labels:
              severity: critical
              topology: seed
              condition: ExtensionsReady
              name: seed-flapping
            exp_annotations:
              summary: >-
                Seed Condition Failing
              description: >
                The seed cluster seed-flapping in landscape-unit-tests
                has a failing condition: ExtensionsReady.
