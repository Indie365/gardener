# this blueprint is generated, please do not modify manually
apiVersion: landscaper.gardener.cloud/v1alpha1
kind: Blueprint
# JSONSchema generated by kube-openapi in version draft-04
# For reference, see: https://json-schema.org/specification-links.html#draft-4
jsonSchema: "http://json-schema.org/draft-04/schema"
imports:
  {{ .imports | nindent 2 }}

exports:
  {{ .exports | nindent 2 }}

# For what can be referenced in the deployExecutions, please see:
# https://github.com/gardener/landscaper/blob/master/docs/usage/Blueprints.md#deployexecutions
deployExecutions:
  - name: default
    type: GoTemplate
    template: |
      deployItems:
      - name: deploy
        type: landscaper.gardener.cloud/container
        target:
          name: {{ `{{ .imports.runtimeCluster.metadata.name }}` }}
          namespace: {{ `{{ .imports.runtimeCluster.metadata.namespace }}` }}
        config:
          apiVersion: container.deployer.landscaper.gardener.cloud/v1alpha1
          kind: ProviderConfiguration
          blueprint:
      {{ `{{ toYaml .blueprint | indent 6 }}` }}

          componentDescriptor:
      {{ `{{ toYaml .componentDescriptorDef | indent 6 }}` }}

          # the import configuration of the Landscaper Controlplane
          importValues:
            {{ `{{ if .imports.apiVersion }}` }}
            apiVersion: .imports.apiVersion
            {{ `{{else}}` }}
            apiVersion: controlplane.gardener.landscaper.gardener.cloud/v1alpha1
            {{ `{{end}}` }}
            kind: Imports
      {{ `{{ toYaml .imports | indent 6 }}` }}

          {{ `{{ $resource := getResource .cd "name" "landscaper-controlplane" }}` }}
          image: {{ `{{ $resource.access.imageReference }}` }}

exportExecutions:
  - name: export-execution
    file: /export-execution.yaml
    type: GoTemplate